{"ast":null,"code":"const intitialState = {\n  totalCost: 0,\n  totalProducts: 0,\n  items: []\n};\nexport default ((state = intitialState, action) => {\n  switch (action.type) {\n    case \"ADD_TO_CART\":\n      {\n        //console.log(\"stateİtems\",state.items, \"ActionObj\", action);\n        return state.items.find(item => {\n          return item.code === action.product.code;\n        }) ? {\n          totalProducts: state.totalProducts + 1,\n          totalCost: state.totalCost + action.product.cost,\n          items: state.items.map(item => {\n            if (item.code === action.product.code) {\n              console.log(\"quantity\", item.quantity, \"product\", action.product);\n              return {\n                ...item,\n                quantity: item.quantity != null ? item.quantity + 1 : 2\n              };\n            } else {\n              return item;\n            }\n          })\n        } : {\n          totalProducts: state.totalProducts + 1,\n          totalCost: state.totalCost + action.product.cost,\n          items: (() => {\n            console.log(\"items\", [...state.items, action.product]);\n            return [...state.items, action.product];\n          })()\n        };\n      }\n    case \"SET_QUANTİTY\":\n      {\n        console.log(\"setQuantity\");\n        let reviseQuantity = state.items.map(item => {\n          if (item.code === action.code) {\n            return {\n              ...item,\n              quantity: action.quantity\n            };\n          }\n          return item;\n        });\n        let reviseTotalQuantity = reviseQuantity.reduce((prev, curr) => prev + curr.quantity, 0);\n        let reviseTotalCost = reviseQuantity.reduce((prev, curr) => prev + curr.qantity * curr.cost, 0);\n        return {\n          totalProducts: reviseTotalQuantity,\n          totalCost: reviseTotalCost,\n          items: reviseQuantity\n        };\n      }\n    case \"REMOVE_ITEM\":\n      {\n        let findItem = state.items.find(item => item.code === action.code);\n        console.log(\"foundItem\", findItem, \"action\", action);\n        if (findItem) {\n          console.log(\"foundItem\");\n          let totalCostOfItem = (findItem.qantity ? findItem.qantity : 1) * findItem.cost;\n          console.log(\"totalCostOfItem\", totalCostOfItem);\n          return {\n            totalProducts: state.totalProducts - (findItem.qantity ? findItem.qantity : 1),\n            totalCost: state.totalCost - totalCostOfItem,\n            item: state.items.filter(item => item.code !== action.code)\n          };\n        } else {\n          return state;\n        }\n      }\n    default:\n      {\n        return state;\n      }\n  }\n});","map":{"version":3,"names":["intitialState","totalCost","totalProducts","items","state","action","type","find","item","code","product","cost","map","console","log","quantity","reviseQuantity","reviseTotalQuantity","reduce","prev","curr","reviseTotalCost","qantity","findItem","totalCostOfItem","filter"],"sources":["C:/Users/ataha/OneDrive/Masaüstü/Redux/14_2_Redux_Setup/start/src/store/reducers/cartReducer.js"],"sourcesContent":["const intitialState = {\r\n  totalCost: 0,\r\n  totalProducts: 0,\r\n  items: [],\r\n};\r\n\r\nexport default (state = intitialState, action) => {\r\n  \r\n  switch (action.type) {\r\n    case \"ADD_TO_CART\": {\r\n      //console.log(\"stateİtems\",state.items, \"ActionObj\", action);\r\n      return state.items.find((item) => {return item.code === action.product.code})\r\n        ? {\r\n            totalProducts: state.totalProducts + 1,\r\n            totalCost: state.totalCost + action.product.cost,\r\n            items: state.items.map((item) => {\r\n              if (item.code === action.product.code) {\r\n                console.log(\"quantity\",item.quantity, \"product\", action.product);\r\n                return {\r\n                  ...item,\r\n                  quantity: (item.quantity != null)? item.quantity + 1 : 2,\r\n                }\r\n              }\r\n              else{return item}\r\n            }),\r\n          }\r\n        : {\r\n            totalProducts: state.totalProducts + 1,\r\n            totalCost: state.totalCost + action.product.cost,\r\n            items: (() => {console.log(\"items\",[...state.items, action.product]);return [...state.items, action.product]})() ,\r\n          };\r\n    }\r\n    case \"SET_QUANTİTY\": {\r\n      console.log(\"setQuantity\");\r\n      let reviseQuantity = state.items.map((item) => {\r\n        if (item.code === action.code) {\r\n          return {\r\n            ...item,\r\n            quantity: action.quantity,\r\n          };\r\n        }\r\n        return item;\r\n      });\r\n\r\n      let reviseTotalQuantity = reviseQuantity.reduce(\r\n        (prev, curr) => prev + curr.quantity,\r\n        0\r\n      );\r\n\r\n      let reviseTotalCost = reviseQuantity.reduce(\r\n        (prev, curr) => prev + curr.qantity * curr.cost,\r\n        0\r\n      );\r\n\r\n      return {\r\n        totalProducts: reviseTotalQuantity,\r\n        totalCost: reviseTotalCost,\r\n        items: reviseQuantity,\r\n      };\r\n    }\r\n\r\n    case \"REMOVE_ITEM\": {\r\n      let findItem = state.items.find(item => item.code === action.code);\r\n      console.log(\"foundItem\",findItem, \"action\", action);\r\n      if(findItem){\r\n        console.log(\"foundItem\");\r\n        let totalCostOfItem = (findItem.qantity? findItem.qantity : 1) * findItem.cost;\r\n        console.log(\"totalCostOfItem\",totalCostOfItem)\r\n        return{\r\n          totalProducts: state.totalProducts - (findItem.qantity? findItem.qantity : 1),\r\n          totalCost: state.totalCost - totalCostOfItem,\r\n          item: state.items.filter(item => item.code !== action.code)\r\n        }\r\n      } else {\r\n        return state;\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}